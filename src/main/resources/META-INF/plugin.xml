<idea-plugin url="https://github.com/imyuyu/FileSyncPlugin">
  <name>FileSync</name>
  <vendor email="2075904@gmail.com" url="https://github.com/imyuyu">imyuyu</vendor>
  <!-- please see http://www.jetbrains.org/intellij/sdk/docs/basics/getting_started/build_number_ranges.html for description -->
  <!--<idea-version since-build="201"/>-->
  <resource-bundle>messages.Labels</resource-bundle>
  <!-- please see http://www.jetbrains.org/intellij/sdk/docs/basics/getting_started/plugin_compatibility.html
        on how to target different products -->
  <depends>com.intellij.modules.platform</depends>
  <depends>com.intellij.modules.lang</depends>
  <depends optional="true" config-file="FileSync-java.xml">com.intellij.modules.java</depends>

  <applicationListeners>
    <listener class="org.imyuyu.idea.plugins.filesync.ProjectOpenCloseListener"
              topic="com.intellij.openapi.project.ProjectManagerListener"/>

    <listener class="org.imyuyu.idea.plugins.filesync.ProjectDynamicPluginListener"
              topic="com.intellij.ide.plugins.DynamicPluginListener" />
  </applicationListeners>

  <extensions defaultExtensionNs="com.intellij">
    <projectService
            serviceImplementation="org.imyuyu.idea.plugins.filesync.utils.ConfigStateComponent"/>

    <projectService
            serviceImplementation="org.imyuyu.idea.plugins.filesync.utils.ConfigExternalizer" />

    <projectService
            serviceImplementation="org.imyuyu.idea.plugins.filesync.FileSyncPlugin" />

    <toolWindow id="FileSync"
                anchor="bottom"
                doNotActivateOnStart="true"
                icon="FileSyncIcons.ToolWindowIcon"
                secondary="true"
                factoryClass="org.imyuyu.idea.plugins.filesync.ui.ThreadConsoleToolWindowFactory"/>

    <projectConfigurable id="FileSync"
                         dynamic="true"
                         key="FileSync"
                         groupId="tools"
                         provider="org.imyuyu.idea.plugins.filesync.setting.FileSyncConfigurableProvider"/>

    <postStartupActivity implementation="org.imyuyu.idea.plugins.filesync.ProjectStartupActivity" />
  </extensions>

  <!-- Component's actions -->
  <actions>
    <group id="FileSyncWindow" text="File Sync" popup="true">
      <action id="FileSync.RerunLastSynchroAction"
        class="org.imyuyu.idea.plugins.filesync.actions.toolbar.RerunLastSynchroAction"
        text="Rerun last synchronization"
        description="Rerun last synchronization"
        icon="/actions/refreshUsages.png">
      </action>
      <action id="FileSync.ThreadStopAction"
        class="org.imyuyu.idea.plugins.filesync.actions.toolbar.ThreadStopAction"
        text="Stop remote synchronizing"
        description="Stop remote synchronizing"
        icon="/actions/suspend.png">
      </action>
      <action id="FileSync.ThreadInterruptAction"
        class="org.imyuyu.idea.plugins.filesync.actions.toolbar.ThreadInterruptAction"
        text="Interrupt remote synchronizing"
        description="Interrupt remote synchronizing"
        icon="/actions/pause.png">
      </action>
      <action id="FileSync.ThreadResumeAction"
        class="org.imyuyu.idea.plugins.filesync.actions.toolbar.ThreadResumeAction"
        text="Resume remote synchronizing"
        description="Resume remote synchronizing"
        icon="/actions/resume.png">
      </action>
      <action id="FileSync.ConsoleClearAction"
        class="org.imyuyu.idea.plugins.filesync.actions.toolbar.ConsoleClearAction"
        text="Clear console"
        description="Clear console"
        icon="/actions/gc.png">
      </action>
      <action id="FileSync.ConsoleRemoveAction"
        class="org.imyuyu.idea.plugins.filesync.actions.toolbar.ConsoleRemoveAction"
        text="Remove current tab"
        description="Remove current tab"
        icon="/general/remove.png">
      </action>
    </group>


    <action id="$RemoteSynchronize.SynchronizeSelectedAction"
            class="org.imyuyu.idea.plugins.filesync.actions.RemoteSynchronizeSelectedAction">
    </action>
    <action id="$RemoteSynchronize.SynchronizeOpenedAction"
            class="org.imyuyu.idea.plugins.filesync.actions.RemoteSynchronizeOpenedAction">
    </action>
    <action id="$RemoteSynchronize.SynchronizeAllAction"
            class="org.imyuyu.idea.plugins.filesync.actions.RemoteSynchronizeAllAction">
    </action>


    <group id="FileSyncActions" text="File Sync" popup="true">
      <separator/>
      <reference ref="$RemoteSynchronize.SynchronizeSelectedAction" />
      <reference ref="$RemoteSynchronize.SynchronizeOpenedAction" />
      <reference ref="$RemoteSynchronize.SynchronizeAllAction" />
      <separator/>

      <add-to-group group-id="EditorPopupMenu" anchor="last"/>
      <add-to-group group-id="ProjectViewPopupMenu" anchor="last"/>
    </group>

  </actions>
</idea-plugin>